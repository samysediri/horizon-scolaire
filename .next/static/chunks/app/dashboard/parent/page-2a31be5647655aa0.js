(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3610],{45194:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>b});var a=l(95155),n=l(12115),s=l(10851),i=l(47202),r=l(82507),d=l(20531),o=l(55570),u=l(39709),c=l(65982);function v(e,t){(0,c.A)(2,arguments);var l=(0,o.A)(e),a=(0,u.A)(t);return isNaN(a)?new Date(NaN):(a&&l.setDate(l.getDate()+a),l)}let m=(0,s.UU)("https://fbkgvmynpiprderzbuld.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZia2d2bXlucGlwcmRlcnpidWxkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI4Mzk2MDAsImV4cCI6MjA1ODQxNTYwMH0.AR2R5f-VFxE0RwHZDQyUuVB3hmcSZBPu8AxkxC1beg0");function b(){let[e,t]=(0,n.useState)(""),[l,s]=(0,n.useState)(""),[b,p]=(0,n.useState)(""),[h,x]=(0,n.useState)([]),[y,w]=(0,n.useState)((0,i.A)(new Date,{weekStartsOn:1}));return(0,n.useEffect)(()=>{(async()=>{let{data:{user:e}}=await m.auth.getUser();if(!e)return;s(e.id);let{data:l}=await m.from("profiles").select("*").eq("id",e.id).maybeSingle();if(l){t(l.first_name),p(l.role);let{data:a}=await m.from("seances").select("*").gte("date",(0,r.A)(y,"yyyy-MM-dd")).lte("date",(0,r.A)(function(e,t){(0,c.A)(1,arguments);var l,a,n,s,i,r,v,m,b=(0,d.q)(),p=(0,u.A)(null!==(l=null!==(a=null!==(n=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t?void 0:null===(i=t.locale)||void 0===i?void 0:null===(r=i.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==n?n:b.weekStartsOn)&&void 0!==a?a:null===(v=b.locale)||void 0===v?void 0:null===(m=v.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==l?l:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=(0,o.A)(e),x=h.getDay();return h.setDate(h.getDate()+((x<p?-7:0)+6-(x-p))),h.setHours(23,59,59,999),h}(y,{weekStartsOn:1}),"yyyy-MM-dd"));x(a.filter(t=>"parent"===l.role&&t.parent_email===e.email||"eleve"===l.role&&t.eleve_nom.toLowerCase().includes(l.first_name.toLowerCase())))}})()},[y]),(0,a.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Bienvenue, ",e]}),(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsx)("button",{onClick:()=>w(v(y,-7)),className:"px-4 py-2 bg-gray-200 rounded",children:"← Semaine pr\xe9c\xe9dente"}),(0,a.jsxs)("p",{className:"text-lg",children:["Semaine du ",(0,r.A)(y,"dd MMM yyyy")]}),(0,a.jsx)("button",{onClick:()=>w(v(y,7)),className:"px-4 py-2 bg-gray-200 rounded",children:"Semaine suivante →"})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:Array.from({length:7},(e,t)=>v(y,t)).map(e=>(0,a.jsxs)("div",{className:"bg-white shadow p-3 rounded",children:[(0,a.jsx)("h4",{className:"text-center font-semibold border-b mb-2 pb-1",children:(0,r.A)(e,"EEEE dd")}),h.filter(t=>t.date===(0,r.A)(e,"yyyy-MM-dd")).map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-300 p-2 rounded mb-2",children:[(0,a.jsx)("p",{className:"font-medium",children:e.eleve_nom}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.heure," • ",e.duree," min"]}),(0,a.jsx)("a",{href:e.lien_lessonspace,target:"_blank",className:"text-blue-600 text-sm hover:underline",children:"Acc\xe9der"}),e.lien_revoir&&(0,a.jsx)("a",{href:e.lien_revoir,target:"_blank",className:"text-purple-600 text-sm hover:underline block mt-1",children:"Revoir"})]},t))]},e))})]})}},47202:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var a=l(55570),n=l(39709),s=l(65982),i=l(20531);function r(e,t){(0,s.A)(1,arguments);var l,r,d,o,u,c,v,m,b=(0,i.q)(),p=(0,n.A)(null!==(l=null!==(r=null!==(d=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t?void 0:null===(u=t.locale)||void 0===u?void 0:null===(c=u.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==d?d:b.weekStartsOn)&&void 0!==r?r:null===(v=b.locale)||void 0===v?void 0:null===(m=v.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==l?l:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=(0,a.A)(e),x=h.getDay();return h.setDate(h.getDate()-(7*(x<p)+x-p)),h.setHours(0,0,0,0),h}},81663:(e,t,l)=>{Promise.resolve().then(l.bind(l,45194))}},e=>{var t=t=>e(e.s=t);e.O(0,[851,2507,8441,1684,7358],()=>t(81663)),_N_E=e.O()}]);