(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{340:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>l});var t=a(95155),u=a(12115),s=a(35695),n=a(10851),o=a(49509);let i=(0,n.UU)(o.env.NEXT_PUBLIC_SUPABASE_URL,o.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);function l(){let[e,r]=(0,u.useState)(!0),[a,n]=(0,u.useState)(""),o=(0,s.useRouter)();return((0,u.useEffect)(()=>{(async()=>{let{data:{user:e},error:a}=await i.auth.getUser();if(a||!e){n("Utilisateur non authentifi\xe9"),r(!1);return}let{data:t,error:u}=await i.from("profiles").select("role").eq("id",e.id).maybeSingle();if(u||!t){n("Profil introuvable"),r(!1);return}let s=t.role;"tuteur"===s?o.push("/dashboard/tuteur"):"eleve"===s?o.push("/dashboard/eleve"):"parent"===s?o.push("/dashboard/parent"):"admin"===s?o.push("/dashboard/admin"):(n("R\xf4le inconnu : ".concat(s)),r(!1))})()},[o]),e)?(0,t.jsx)("p",{className:"p-4",children:"Chargement du tableau de bord..."}):a?(0,t.jsx)("p",{className:"p-4 text-red-600",children:a}):null}},35126:(e,r,a)=>{Promise.resolve().then(a.bind(a,340))},35695:(e,r,a)=>{"use strict";var t=a(18999);a.o(t,"useParams")&&a.d(r,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})}},e=>{var r=r=>e(e.s=r);e.O(0,[851,8441,1684,7358],()=>r(35126)),_N_E=e.O()}]);