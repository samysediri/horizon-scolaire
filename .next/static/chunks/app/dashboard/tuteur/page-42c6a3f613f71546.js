(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4609],{12270:(e,t,s)=>{"use strict";var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i=(e,t,s)=>new Promise((r,n)=>{var u=e=>{try{i(s.next(e))}catch(e){n(e)}},o=e=>{try{i(s.throw(e))}catch(e){n(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(u,o);i((s=s.apply(e,t)).next())}),l={};((e,t)=>{for(var s in t)r(e,s,{get:t[s],enumerable:!0})})(l,{SessionContextProvider:()=>f,useSession:()=>h,useSessionContext:()=>v,useSupabaseClient:()=>b,useUser:()=>x}),e.exports=((e,t,s,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of u(t))o.call(e,s)||void 0===s||r(e,s,{get:()=>t[s],enumerable:!(i=n(t,s))||i.enumerable});return e})(r({},"__esModule",{value:!0}),l);var a=s(12115),d=s(95155),c=(0,a.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),f=({supabaseClient:e,initialSession:t=null,children:s})=>{let[r,n]=(0,a.useState)(t),[u,o]=(0,a.useState)(!t),[l,f]=(0,a.useState)();(0,a.useEffect)(()=>{!r&&t&&n(t)},[r,t]),(0,a.useEffect)(()=>{let t=!0;return function(){i(this,null,function*(){let{data:{session:s},error:r}=yield e.auth.getSession();if(t){if(r){f(r),o(!1);return}n(s),o(!1)}})}(),()=>{t=!1}},[]),(0,a.useEffect)(()=>{let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&n(t),"SIGNED_OUT"===e&&n(null)});return()=>{t.unsubscribe()}},[]);let v=(0,a.useMemo)(()=>u?{isLoading:!0,session:null,error:null,supabaseClient:e}:l?{isLoading:!1,session:null,error:l,supabaseClient:e}:{isLoading:!1,session:r,error:null,supabaseClient:e},[u,r,l]);return(0,d.jsx)(c.Provider,{value:v,children:s})},v=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function b(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var h=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},x=()=>{var e,t;let s=(0,a.useContext)(c);if(void 0===s)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=s.session)?void 0:e.user)?t:null}},70094:(e,t,s)=>{Promise.resolve().then(s.bind(s,72034))},72034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(95155),n=s(12270),u=s(12115);function o(){let e=(0,n.useUser)(),[t,s]=(0,u.useState)(!1),[o,i]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{s(!0)},[]),(0,u.useEffect)(()=>{var t;(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.role)==="admin"&&i(!0)},[e]),t)?(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Bienvenue sur le tableau de bord Tuteur"}),o&&(0,r.jsx)("a",{href:"/dashboard/admin",className:"text-blue-600 underline",children:"Aller au tableau de bord Admin"})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(70094)),_N_E=e.O()}]);